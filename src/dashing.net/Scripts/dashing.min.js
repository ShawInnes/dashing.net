(function(){var r,n,t,i,e={}.hasOwnProperty,u=function(n,t){function r(){this.constructor=n}for(var i in t)e.call(t,i)&&(n[i]=t[i]);return r.prototype=t.prototype,n.prototype=new r,n.__super__=t.prototype,n},f=function(n,t){return function(){return n.apply(t,arguments)}};Batman.Filters.prettyNumber=function(n){if(!isNaN(n))return n.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")};Batman.Filters.dashize=function(n){var t,i;return t=/([A-Z]+)([A-Z][a-z])/g,i=/([a-z\d])([A-Z])/g,n.replace(t,"$1_$2").replace(i,"$1_$2").replace("_","-").toLowerCase()};Batman.Filters.shortenedNumber=function(n){return isNaN(n)?n:n>=1e9?(n/1e9).toFixed(1)+"B":n>=1e6?(n/1e6).toFixed(1)+"M":n>=1e3?(n/1e3).toFixed(1)+"K":n};window.Dashing=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,n),t.root(function(){}),t}(Batman.App);Dashing.params=Batman.URI.paramsFromQuery(window.location.search.slice(1));Dashing.Widget=function(n){function t(){this.onData=f(this.onData,this);this.receiveData=f(this.receiveData,this);var n,i,r;this.constructor.prototype.source=Batman.Filters.underscore(this.constructor.name);t.__super__.constructor.apply(this,arguments);this.mixin($(this.node).data());(i=Dashing.widgets)[r=this.id]||(i[r]=[]);Dashing.widgets[this.id].push(this);this.mixin(Dashing.lastEvents[this.id]);n=Batman.Filters.dashize(this.view);$(this.node).addClass("widget widget-"+n+" "+this.id)}u(t,n);t.accessor("updatedAtMessage",function(){var t,i,n,r;if(r=this.get("updatedAt"))return n=new Date(r*1e3),t=n.getHours(),i=("0"+n.getMinutes()).slice(-2),"Last updated at "+t+":"+i});t.prototype.on("ready",function(){return Dashing.Widget.fire("ready")});return t.prototype.receiveData=function(n){this.mixin(n);return this.onData(n)},t.prototype.onData=function(){},t}(Batman.View);Dashing.AnimatedValue={get:Batman.Property.defaultAccessor.get,set:function(n,t){var i,f,r,u;return t==null||isNaN(t)?this[n]=t:(r="interval_"+n,i=!isNaN(this[n])&&this[n]!=null?this[n]:0,this[r]||i===t||(t=parseFloat(t),i=parseFloat(i),u=t>i,f=Math.abs(i-t)/90,this[r]=setInterval(function(e){return function(){return i=u?Math.ceil(i+f):Math.floor(i-f),(u&&i>t||!u&&i<t)&&(i=t,clearInterval(e[r]),e[r]=null,delete e[r]),e[n]=i,e.set(n,t)}}(this),10)),this[n]=i)}};Dashing.widgets=i={};Dashing.lastEvents=t={};Dashing.debugMode=!0;$.connection.hub.logging=!0;r=$.connection.eventsController;r.client.sendMessage=function(){return function(n){var r,o,u,s,h,c,f,e;if(r=JSON.parse(n),((h=t[r.id])!=null?h.updatedAt:void 0)!==r.updatedAt&&(Dashing.debugMode&&console.log("Received data for "+r.id,r),t[r.id]=r,((c=i[r.id])!=null?c.length:void 0)>0)){for(f=i[r.id],e=[],u=0,s=f.length;u<s;u++)o=f[u],e.push(o.receiveData(r));return e}}}(this);n=$.connection.hub.start();n.done(function(){return console.log("Connection opened")});n.fail(function(){return console.log("Connection error")});$(document).ready(function(){return Dashing.run()})}).call(this);
/*
//# sourceMappingURL=dashing.min.js.map
*/